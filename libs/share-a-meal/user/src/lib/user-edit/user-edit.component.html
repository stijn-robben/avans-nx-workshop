<section class="bg-white dark:bg-gray-900">
    <div *ngIf="user; else loading">
      <div class="py-8 px-4 mx-auto max-w-7xl lg:py-16 grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Form Section -->
        <div>
            <h2 class="mb-4 text-xl font-bold text-gray-900 dark:text-white">{{user!.firstName}} {{user!.lastName}}</h2>
            <form 
                #userEditForm="ngForm"
                (ngSubmit)="userEditForm.form.valid && onSubmit()"
                novalidate
            >
                <div class="grid gap-4 sm:grid-cols-2 sm:gap-6">
                      <!-- First Name -->
                <div class="w-full">
                    <label for="firstName" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">First Name</label>
                    <input
                      type="text"
                      [(ngModel)]="user!.firstName"
                      name="firstName"
                      #firstName="ngModel"
                      id="firstName" 
                      [ngClass]="{
                        'is-invalid': firstName.invalid && firstName.touched
                      }"
                      required
                      minlength="3"
                      class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" 
                      placeholder="First Name" 
                      required
                    />
                    
          <div
          *ngIf="firstName.invalid && firstName.touched"
          class="text-red-600 text-sm"
        >
          <div *ngIf="firstName.errors?.['required']">
            First name is required.
          </div>
          <div *ngIf="firstName.errors?.['minlength']">
            First name must be at least 3 characters long.
          </div>
        </div>
                </div>
                <!-- Last Name -->
                <div class="w-full">
                    <label for="lastName" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Last Name</label>
                    <input 
                        type="text" 
                        [(ngModel)]="user!.lastName"
                        name="lastName" 
                        #lastName="ngModel"
                        id="lastName" 
                        [ngClass]="{
                            'is-invalid': lastName.invalid && lastName.touched
                          }"
                          minlength="3"
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" 
                        placeholder="Last Name" 
                        required
                    />
                    <div
                    *ngIf="lastName.invalid && lastName.touched"
                    class="text-red-600 text-sm"
                  >
                    <div *ngIf="lastName.errors?.['required']">    Last name is required.
                    </div>
                    <div *ngIf="lastName.errors?.['minlength']">
                        Last name must be at least 3 characters long.
                    </div>
                  </div>
                </div>
                <!-- Email Address -->
                <div class="sm:col-span-2">
                    <label for="emailAddress" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Email Address</label>
                    <input 
                        type="email" 
                        [(ngModel)]="user!.emailAddress"
                        name="emailAddress" 
                        #emailAddress="ngModel"
                        id="emailAddress" 
                        [ngClass]="{
                            'is-invalid': emailAddress.invalid && emailAddress.touched
                          }"
                          required
                          minlength="3"
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" 
                        placeholder="Email Address" 
                    
                    >
                    <div *ngIf="emailAddress.invalid && emailAddress.touched" class="text-red-600 text-sm">
                        <div *ngIf="emailAddress.errors?.['required']">
                          Email address is required.
                        </div>
                        <div *ngIf="emailAddress.errors?.['email']">
                          Please enter a valid email address.
                        </div>
                      </div>
                </div>
               <!-- Password field with toggle button -->
                    <div class="sm:col-span-2">
                        <label for="password" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Password</label>
                        <div class="relative">
                        <input 
                            [type]="hidePassword ? 'password' : 'text'"
                            [(ngModel)]="user!.password"
                            name="password"
                            id="password"
                            #password="ngModel"
                            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                            [ngClass]="{
                                'is-invalid': password.invalid && password.touched
                              }"
                              required
                              minlength="9"
                        />
                        <button 
                        type="button" 
                        (click)="hidePassword = !hidePassword"
                        class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5"
                      >
                       
                        <i [class]="hidePassword ? 'fas fa-eye-slash' : 'fas fa-eye'" class="text-gray-700 dark:text-gray-300"></i>
                      </button>

                        </div>
                        <div *ngIf="password.invalid && password.touched" class="text-red-600 text-sm">
                            <div *ngIf="password.errors?.['required']">
                              Password is required.
                            </div>
                            <div *ngIf="password.errors?.['minlength']">
                              Password must be at least 9 characters long.
                            </div>
                          </div>
                    </div>
                <!-- Birthdate -->
                <div class="sm:col-span-2">
                    <label for="birthdate" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Birthdate</label>
                    <input 
                        type="date" 
                        [(ngModel)]="_birthdate"
                        name="birthdate" 
                        #birthdate="ngModel"
                        id="birthdate" 
                        [ngClass]="{'is-invalid': birthdate.invalid && birthdate.touched}"
                        class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500" 
                        required
                    />
                    <div *ngIf="birthdate.invalid && birthdate.touched" class="text-red-600 text-sm">
                        <div *ngIf="birthdate.errors?.['required']">
                          Birthdate is required.
                        </div>
                      </div>
                </div>
                <!-- Postal Code -->
<div class="w-full">
  <label for="postalCode" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Postal Code</label>
  <input 
      type="text" 
      [(ngModel)]="user!.postalCode"
      name="postalCode"
      #postalCode="ngModel"
      id="postalCode"
      class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
      placeholder="Postal Code" 
      required
  />
  <div *ngIf="postalCode.invalid && postalCode.touched" class="text-red-600 text-sm">
      <div *ngIf="postalCode.errors?.['required']">
          Postal code is required.
      </div>
  </div>
</div>

<!-- House Number -->
<div class="w-full">
  <label for="houseNumber" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">House Number</label>
  <input 
      type="text" 
      [(ngModel)]="user!.houseNumber"
      name="houseNumber"
      #houseNumber="ngModel"
      id="houseNumber"
      class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
      placeholder="House Number" 
      required
  />
  <div *ngIf="houseNumber.invalid && houseNumber.touched" class="text-red-600 text-sm">
      <div *ngIf="houseNumber.errors?.['required']">
          House number is required.
      </div>
  </div>
</div>

<!-- Phone Number -->
<div class="w-full">
  <label for="phoneNumber" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Phone Number</label>
  <input 
      type="text" 
      [(ngModel)]="user!.phoneNumber"
      name="phoneNumber"
      #phoneNumber="ngModel"
      id="phoneNumber"
      class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"
      placeholder="Phone Number" 
      required
  />
  <div *ngIf="phoneNumber.invalid && phoneNumber.touched" class="text-red-600 text-sm">
      <div *ngIf="phoneNumber.errors?.['required']">
          Phone number is required.
      </div>
  </div>
</div>
                <!-- Role -->
                <div class="sm:col-span-2">
                    <span class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Role</span>
                    <div class="flex items-center mb-4">
                        <input id="admin" name="role" type="radio" value="admin" 
                        [(ngModel)]="user!.role"
                         #role="ngModel" 
                         class="w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 focus:ring-primary-500 focus:ring-2 dark:focus:ring-primary-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600"
                         [ngClass]="{'is-invalid': role.invalid && role.touched}"

                         />
                        <label for="admin" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Admin</label>
                    </div>
                    <div class="flex items-center">
                        <input id="member" name="role" type="radio" value="member" [(ngModel)]="user!.role" #role="ngModel" class="w-4 h-4 text-primary-600 bg-gray-100 border-gray-300 focus:ring-primary-500 focus:ring-2 dark:focus:ring-primary-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600">
                        <label for="member" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Member</label>
                    </div>
                    <div *ngIf="role.invalid && role.touched" class="text-red-600 text-sm">
                        <div *ngIf="role.errors?.['required']">
                          Selecting a role is required.
                        </div>
                      </div>
                </div>
                </div>

                <!-- Buttons -->
                <div class="flex justify-between sm:col-span-2 mt-6">
                  <!-- Submit Button -->
             <!-- <button type="submit" class="text-white bg-blue-500 px-5 py-2.5  mt-4 sm:mt-6 text-sm font-medium text-center  bg-primary-700 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-800">Submit</button> -->
                <!-- Submit Button -->
                <button 
                  type="submit" 
                  class="inline-flex items-center px-4 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
                >
                  Submit
                </button>
              
                <!-- Cancel Button -->
                <button 
                  type="button" 
                  (click)="onCancel()" 
                  class="inline-flex items-center px-5 py-2.5 text-sm font-medium text-center text-white bg-gray-500 rounded-lg focus:ring-4 focus:ring-gray-200 hover:bg-gray-600"
                >
                  Cancel
                </button>
              </div>
               
            </form>
        </div>

        <!-- JSON Object Display Section -->
        <!-- <div class="bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700 p-4">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">User JSON Data</h3>
            <pre class="text-sm text-gray-600 dark:text-gray-400 overflow-x-auto">{{ user | json }}</pre>
        </div> -->
    </div>
    </div>
    <ng-template #loading>
      <p>Loading...</p>
    </ng-template>
    
</section>


